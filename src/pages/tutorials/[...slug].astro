---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

export async function getStaticPaths() {
  const tutorials = await getCollection('tutorials');
  return tutorials.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
const { title, description, device, level } = entry.data;
---
<BaseLayout
  title={title}
  description={description || `Tutorial สำหรับอุปกรณ์ ${device} ระดับ ${level}`}
>
  <article class="tutorial">
    <header>
      <p class="eyebrow">
        Device: {device === 'raspberry-pi5' ? 'Raspberry Pi 5' : device === 'radxa-dragon-q6a' ? 'Radxa DRAGON Q6A' : 'Edge device'}
        {' · '}ระดับ: {level}
      </p>
      <h1>{title}</h1>
      {description && <p class="summary">{description}</p>}
    </header>
    <Content />
  </article>
</BaseLayout>

<style>
  .tutorial header { margin-bottom: 1.5rem; }
  .eyebrow {
    font-size: 0.85rem;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--muted);
    margin-bottom: 0.25rem;
  }
  .tutorial h1 { margin: 0 0 0.5rem; }
  .summary { margin: 0; color: var(--muted); }
  .tutorial :global(h2) { margin-top: 1.5rem; font-size: 1.25rem; }
  .tutorial :global(h3) { margin-top: 1.25rem; font-size: 1.05rem; }
  .tutorial :global(ul),
  .tutorial :global(ol) { padding-left: 1.5rem; }
</style>

